
# Введение

В мире огромных объемов данных как никогда важно сделать информацию доступной и легко интерпретируемой. С помощью InterSystems Reports (Logi Reports) вы можете легко и эффективно представлять сложные данные.
  
# Подготовка

1. Установите InterSystems IRIS.
2. Установите InterSystems Reports.
3. Установите [ZPM](https://community.intersystems.com/post/introducing-intersystems-objectscript-package-manager).
4. Установите модуль ZPM HoleFoolds: `zpm "install samples-bi"`

# Упражнение 1: Создание каталога и источника данных для подключения к InterSystems IRIS 

В этом упражнении вы откроете InterSystems Reports Designer (Logi Report Designer) и создадите каталог HoleFoods с InterSystems IRIS в качестве источника данных. Этот каталог поможет организовать ваши источники данных, запросы, отчеты и другие ресурсы. Каждый каталог может иметь любое количество таких ресурсов, но только один каталог одновременно может активно редактироваться из Designer.

1. Откройте Logi Report Designer. Когда появится начальный экран, нажмите на X, чтобы закрыть его и перейти к основной рабочей области.
2. В Designer нажмите `File` > `New Catalog` и заполните поля следующим образом:
   - Name: `HoleFoods.cat`
   - Data Source Name: `IRIS2020`

После создания каталога автоматически появляется Catalog Manager.

![image](https://user-images.githubusercontent.com/5127457/130675722-1d12b761-4922-442a-8ad8-2f7e6e361766.png)

3. Нажмите правой кнопкой мыши на `IRIS2020`, затем `New JDBC Connection` и выберите `InterSystems IRIS` в качестве `Connection Type`. Заполните следующие поля:
 
   - Server: localhost
   - Port: 1972
   - Namespace: область установки HoleFoods
   - User: пользователь
   - Password: пароль

4. Нажмите `Test Connection`, чтобы убедиться, что вы можете успешно подключиться к вашему серверу InterSystems IRIS, и нажмите `OK`.
5. Во всплывающем окне нажмите `Add Tables` и добавьте таблицы, на которые вы будете ссылаться из этого источника данных.

   - В разделе `Schemas` выберите `HoleFoods`.
   - Нажмите `Refresh`, чтобы перечислить все таблицы в этой схеме. 
   - Выберите все доступные таблицы и нажмите кнопку `Add`. 
   - Нажмите `Done`.
   - Нажмите `X`, чтобы выйти из всплывающего окна `New Queries or Business Views`.

6. Многие поля в наборе данных HoleFoods имеют одинаковые имена, например ID и Name. Чтобы в дальнейшем не пришлось развязывать эти поля, удалите автоматическую привязку полей: 

   - Нажмите `Options` > `Query Editor`.
   - Снимите все опции `Auto Join` и нажмите `OK`.

    ![image](https://user-images.githubusercontent.com/5127457/130676761-768973ec-cf74-4e65-90c6-4924a3bb194d.png)

7.	Затем создайте новый запрос с именем `HoleFoodsTransactionsQuery`, который использует источник данных `InterSystems IRIS`, включая все таблицы и поля. 
   - Нажмите `Queries`, чтобы изменить верхнее ленточное меню в этом окне, затем `New Query`.
![image](https://user-images.githubusercontent.com/5127457/130676961-b9e71b4d-9844-4dc5-9e82-b76469703f74.png)
   - Назовите запрос `HoleFoodsTransactionsQuery`. 
   - Когда появится запрос на выбор таблиц для включения в запрос, разверните подключения JDBC и выберите все таблицы, которые вы добавили в шаге 5. 
   - Нажмите стрелку вправо (![image](https://user-images.githubusercontent.com/5127457/130677115-2cd0fa43-33df-4fa4-b54b-24f067a44957.png)) в Мастере, чтобы добавить таблицы, затем нажмите `OK`.

8.	Укажите столбцы для запроса и столбцы для объединения. Таблицы появятся в интерактивном окне в верхней части редактора запросов. Каждый столбец SQL будет перечислен в таблице в виде строки с установленным рядом флажком. 
   - Установите флажок звездочки (`*`) в каждой таблице, чтобы выбрать все столбцы для запроса. 

![image](https://user-images.githubusercontent.com/5127457/130677247-802998bb-7122-4d66-8f14-7fe550e576b8.png)

   - Перетащите один столбец SQL на другой, чтобы создать соединения между следующими таблицами:

     + `SalesTransaction.Product` и `Product.Product_ID`.
     + `SalesTransaction.Outlet` и `Outlet.Outlet_ID`.
     + `Country.Region` и `Region.Region_ID`.
     + `Outlet.Country` и `Country.ID`. 

 ![image](https://user-images.githubusercontent.com/5127457/130677479-2558bb06-3dc1-483a-a4fb-68920c3b0023.png)

   - Если вы случайно соединили неправильные столбцы, дважды нажмите по ячейке с буквой `J` в линии, соединяющей таблицы, нажмите `Delete Join` во всплывающем окне и нажмите `OK`.

![image](https://user-images.githubusercontent.com/5127457/130677553-9f63776e-da90-4e49-82e7-e7b3277ce9a3.png)

9.	Нажмите `Save Catalog`. 
10.	Нажмите `X`, чтобы выйти из менеджера каталогов.

# Упражнение 2: Использование запросов и сводок в ленточном отчете

В этом задании вы создадите полосный отчет, отображающий количество проданных единиц каждого продукта. Затем вы добавите группировки и сводки, чтобы объединить данные в осмысленном виде. Наконец, вы добавите логотип к отчету, чтобы придать ему индивидуальность.

Отчет с полосами полезен для отчетов, в которых требуются специальные макеты, группировки, итоги, промежуточные итоги, сводки, диаграммы, графики или встроенные изображения. Полосы повторяются и позволяют упорядочить данные с помощью одинаковых заголовков и другого содержимого.


