After almost 4 years hiatus [my CI/CD series](https://community.intersystems.com/post/continuous-delivery-your-intersystems-solution-using-gitlab-index) is back! Over the years I have been working with several InterSystems clients, developing CI/CD pipelines for very different use cases, so I hope the information, presented in this article would be useful to someone.

In this [series of articles](https://community.intersystems.com/post/continuous-delivery-your-intersystems-solution-using-gitlab-index), I'd like to present and discuss several possible approaches towards software development with InterSystems technologies and GitLab. 

We have an exciting range of topics to cover: first let's talk about things beyond the code - namely configurations and data.


# Issue

Previously we discussed code promotions and that was, in a way, stateless - we always go from a (presumably) empty instance to a full codebase. But sometimes we need to provide data. There are different data types:

- Configuration: users, web apps, LUTs, custom schemas, tasks, business partners, and many more
- Settings: environment-specific key-value pairs
- Data: reference tables and such often must be provided for your app to work

Let's dicuss all these data types and how they can be first commited into a source control and later deployed.

# Configuration

Configuration is spread across many different classes, but most of them can be exported as XMLs. First of all is [Security package](https://docs.intersystems.com/irislatest/csp/documatic/%25CSP.Documatic.cls?LIBRARY=%25SYS&PACKAGE=Security) containing information about:

- Web Applications
- DocDBs
- Domains
- Audit Events
- KMIPServers
- LDAP Configs
- Resources
- Roles
- SQL Privileges
- SSL Configs
- Services
- Users

All of these classes provide `Exists`, `Export` and `Import` methods allowing you to move them between environments.

A few caveats:

- Users and SSL Configurations might contain sensitive information, such as passwords. It is generally NOT recommended to store them in source control due to security reasons. Use Export/Import methods to facilitate one off transfers
- By default Export/Import methods output everythong in one file, which might be not very source control friendly. Here's an [utility class](https://gist.github.com/eduard93/3a9abdb2eb150a456191bf387c1fc0c3) which can export and import Lookup Tables, Custom Schemas, Business Partners, Tasks, Credentials and SSL Configuration. It exports one item per file so you get a directoru with LUT, another directory with Custom Schemas and so on. For SSL Configurations, files (certificates and keys) are also exported.

Tasks are stored as objects of [%SYS.Task](https://docs.intersystems.com/irislatest/csp/documatic/%25CSP.Documatic.cls?LIBRARY=%25SYS&CLASSNAME=%25SYS.Task) class which provides `ExportTasks` and `ImportTasks` methods. You can also check the utility class above to import and export tasks one by one. Note that when you import  tasks you can get import errors (ERROR #7432: Start Date and Time must be after the current date and time) if `StartDate` or other Schedule-related properties are in the past. As a solution set `LastSchedule` to `0` and InterSystems IRIS would reshedule a newly imported task to run.

## Interoperability

Interoperability productions provide:

- Business Partners
- Credentials
- System Default Settings
- Lookup Tables 

# Settings

- System Default Settings
- Production Settings

General approach: Keep settings in one place and load from this place using environment-specific qualifier.

Two types of settings.

# Data

Do you need visibility?

- Global export
- CSV

# Conclusions
